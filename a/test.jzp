(mod-load code.jzp)

(entry main ()
  (push 4)
  (push factorial)
  (call)
  (push system-ostream)
  (push stream-output)
  (call)
  (return))

(subr test-count (x)
  (var tmp)
  (load x)
  (store tmp)
  (push 1)
  (load tmp)
  (sub)
  (store tmp)
  (load tmp)
  (push 0)
  (eq)
  (not)
  (jmpi -8)
  (return))

(subr test-output ()
  (push 1)
  (push system-ostream)
  (push stream-output)
  (call)
  (return)
)
